{"code":"// ERROR HANDLING\r\nexport var GEN_ERR = 'GEN_ERR';\r\nexport var CLEAR_ERR = 'CLEAR_ERR';\r\nexport function clearError() {\r\n    return {\r\n        type: CLEAR_ERR,\r\n        error: 'dismissed',\r\n        route: 'dismissed'\r\n    };\r\n}\r\nexport function recieveError(error, dispatch) {\r\n    if (error.error !== null && typeof error.error === 'object') {\r\n        console.log('The input was an object from postgres, write a more specific error for the route: ', error.route);\r\n        error.error = 'There was a problem with your input. Try again.';\r\n    }\r\n    return {\r\n        type: GEN_ERR,\r\n        error: error.error,\r\n        route: error.route\r\n    };\r\n}\r\n// PHOTO THUNK\r\nexport var REQ_PHOTOS = 'REQ_PHOTOS';\r\nexport var RES_PHOTOS = 'RES_PHOTOS';\r\nexport function reqPhotos() {\r\n    return { type: REQ_PHOTOS };\r\n}\r\nfunction resPhotos(albums) {\r\n    return {\r\n        type: RES_PHOTOS,\r\n        albums: albums\r\n    };\r\n}\r\nexport function fetchPhotos() {\r\n    return function (dispatch) {\r\n        dispatch(reqPhotos());\r\n        return fetch(\"/photos\", {\r\n            method: \"get\",\r\n            credentials: 'same-origin',\r\n            headers: {\r\n                \"Accept\": \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n            .then(function (res) { return res.json(); })\r\n            .then(function (albums) {\r\n            if (albums.status === 'failed') {\r\n                return dispatch(recieveError(albums, dispatch));\r\n            }\r\n            console.log('fetch album data', albums);\r\n            dispatch(resPhotos(albums));\r\n        });\r\n    };\r\n}\r\n// SAMPLE THUNK\r\nexport var REQ_TEST = 'REQ_TEST';\r\nexport var RES_TEST = 'RES_TEST';\r\nexport function reqTestData() {\r\n    return { type: REQ_TEST };\r\n}\r\nfunction resTestData(test) {\r\n    return {\r\n        type: RES_TEST,\r\n        test: test\r\n    };\r\n}\r\nexport function fetchTestData() {\r\n    return function (dispatch) {\r\n        dispatch(reqTestData());\r\n        return fetch(\"/test\", {\r\n            method: \"get\",\r\n            credentials: 'same-origin',\r\n            headers: {\r\n                \"Accept\": \"application/json\",\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n            .then(function (res) { return res.json(); })\r\n            .then(function (test) {\r\n            if (test.status === 'failed') {\r\n                return dispatch(recieveError(test, dispatch));\r\n            }\r\n            console.log('fetch test data', test);\r\n            dispatch(resTestData(test));\r\n        });\r\n    };\r\n}\r\n//# sourceMappingURL=actions.js.map","map":"{\"version\":3,\"file\":\"actions.js\",\"sourceRoot\":\"\",\"sources\":[\"../src/public/actions.ts\"],\"names\":[],\"mappings\":\"AAAA,iBAAiB;AACjB,MAAM,CAAC,IAAM,OAAO,GAAG,SAAS,CAAA;AAChC,MAAM,CAAC,IAAM,SAAS,GAAG,WAAW,CAAA;AAEpC,MAAM;IACF,MAAM,CAAC;QACH,IAAI,EAAE,SAAS;QACf,KAAK,EAAE,WAAW;QAClB,KAAK,EAAE,WAAW;KACrB,CAAA;AAEL,CAAC;AAED,MAAM,uBAAuB,KAAK,EAAE,QAAQ;IACxC,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,KAAK,IAAI,IAAI,OAAO,KAAK,CAAC,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;QAC1D,OAAO,CAAC,GAAG,CAAC,oFAAoF,EAAE,KAAK,CAAC,KAAK,CAAC,CAAA;QAC9G,KAAK,CAAC,KAAK,GAAG,iDAAiD,CAAA;IACnE,CAAC;IACD,MAAM,CAAC;QACH,IAAI,EAAE,OAAO;QACb,KAAK,EAAE,KAAK,CAAC,KAAK;QAClB,KAAK,EAAE,KAAK,CAAC,KAAK;KACrB,CAAA;AACL,CAAC;AAGD,cAAc;AACd,MAAM,CAAC,IAAM,UAAU,GAAG,YAAY,CAAC;AACvC,MAAM,CAAC,IAAM,UAAU,GAAG,YAAY,CAAC;AAEvC,MAAM;IACF,MAAM,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,CAAA;AAC/B,CAAC;AAED,mBAAmB,MAAM;IACrB,MAAM,CAAC;QACH,IAAI,EAAE,UAAU;QAChB,MAAM,QAAA;KACT,CAAA;AACL,CAAC;AAED,MAAM;IACF,MAAM,CAAC,UAAU,QAAQ;QACrB,QAAQ,CAAC,SAAS,EAAE,CAAC,CAAA;QACrB,MAAM,CAAC,KAAK,CAAC,SAAS,EAAE;YACpB,MAAM,EAAE,KAAK;YACb,WAAW,EAAE,aAAa;YAC1B,OAAO,EAAE;gBACL,QAAQ,EAAE,kBAAkB;gBAC5B,cAAc,EAAE,kBAAkB;aACrC;SACJ,CAAC;aACG,IAAI,CAAC,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;aACzB,IAAI,CAAC,UAAA,MAAM;YACR,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC;gBAC7B,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAA;YACnD,CAAC;YACD,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,MAAM,CAAC,CAAA;YACvC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAA;QAC/B,CAAC,CAAC,CAAA;IACV,CAAC,CAAA;AACL,CAAC;AAMD,eAAe;AACf,MAAM,CAAC,IAAM,QAAQ,GAAG,UAAU,CAAC;AACnC,MAAM,CAAC,IAAM,QAAQ,GAAG,UAAU,CAAC;AAEnC,MAAM;IACF,MAAM,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAA;AAC7B,CAAC;AAED,qBAAqB,IAAI;IACrB,MAAM,CAAC;QACH,IAAI,EAAE,QAAQ;QACd,IAAI,MAAA;KACP,CAAA;AACL,CAAC;AAED,MAAM;IACF,MAAM,CAAC,UAAU,QAAQ;QACrB,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAA;QACvB,MAAM,CAAC,KAAK,CAAC,OAAO,EAAE;YAClB,MAAM,EAAE,KAAK;YACb,WAAW,EAAE,aAAa;YAC1B,OAAO,EAAE;gBACL,QAAQ,EAAE,kBAAkB;gBAC5B,cAAc,EAAE,kBAAkB;aACrC;SACJ,CAAC;aACG,IAAI,CAAC,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;aACzB,IAAI,CAAC,UAAA,IAAI;YACN,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC;gBAC3B,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAA;YACjD,CAAC;YACD,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAA;YACpC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAA;QAC/B,CAAC,CAAC,CAAA;IACV,CAAC,CAAA;AACL,CAAC\"}"}
